/* esm.sh - hybrids@9.1.21 */
var no=Object.defineProperty;var Ht=(e,t)=>{for(var n in t)no(e,n,{get:t[n],enumerable:!0})};var Xt=new Map;function I(e){let t=Xt.get(e);return t===void 0&&(t=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Xt.set(e,t)),t}function He(e,t,n={}){return e.dispatchEvent(new globalThis.CustomEvent(t,{bubbles:!1,...n}))}function oe(e){return`<${String(e.tagName).toLowerCase()}>`}function ne(e,t){e.nodeType===globalThis.Node.ELEMENT_NODE&&(t(e),e.shadowRoot&&ne(e.shadowRoot,t));let n=globalThis.document.createTreeWalker(e,globalThis.NodeFilter.SHOW_ELEMENT,null,!1);for(;n.nextNode();){let o=n.currentNode;t(o),o.shadowRoot&&ne(o.shadowRoot,t)}}var Jt=!1;function je(){return Jt}function Xe(){Jt=!0}var B=Promise.resolve(),re=new WeakMap;var Z=new Set;function Ne(e){Z.size===0&&B.then(oo),Z.has(e)&&Z.delete(e),Z.add(e)}function qt(e){Z.delete(e)}function oo(){for(let e of Z)try{e()}catch(t){console.error(t)}Z.clear()}var he=new WeakMap,pe=new Set;function Je(e,t=!1){let n=[],o=0;for(e.resolved=t;e;){if(e.contexts)for(let s of e.contexts)!pe.has(s)&&!n.includes(s)&&(s.resolved=!1,n.push(s));e.observe&&Ne(e.observe),e=n[o++]}}function C(e,t){let n=he.get(e);n||(n=new Map,he.set(e,n));let o=n.get(t);return o||(o={key:t,target:e,value:void 0,assertValue:void 0,lastValue:void 0,resolved:!1,contexts:void 0,deps:void 0,observe:void 0},n.set(t,o)),o}function qe(e){let t=he.get(e);return t?[...t.values()]:[]}var N=null;function Le(){return N?.value}function A(e,t,n){let o=C(e,t);if(N&&(o.contexts||(o.contexts=new Set),N.deps||(N.deps=new Set),o.contexts.add(N),N.deps.add(o)),o.resolved)return o.value;if(o.deps){for(let r of o.deps)r.contexts.delete(o);o.deps.clear()}let s=N;try{if(pe.has(o))throw Error(`Circular get invocation is forbidden: '${t}'`);N=o,pe.add(o),o.value=n(e,o.assertValue),o.resolved=!0,N=s,pe.delete(o)}catch(r){throw N=s,pe.delete(o),N&&(N.deps.delete(o),o.contexts.delete(N)),r}return o.value}function me(e,t,n,o){if(N&&N.target===e&&!o)throw Error(`Try to update the '${t}' property while getting the '${N.key}' property`);let s=C(e,t);s.value=void 0,s.assertValue=n,Je(s)}function Yt(e,t,n,o){let s=C(e,t),r=n(e,o,s.value);r!==s.value&&(s.value=r,s.assertValue=void 0,Je(s,!0),s.resolved=!0)}function ke(e,t,n,o){let s=C(e,t);s.observe=()=>{let r=A(e,t,n);r!==s.lastValue&&(o(e,r,s.lastValue),s.lastValue=r)};try{s.observe()}catch(r){console.error(r)}return()=>{s.observe=void 0,s.lastValue=void 0}}var Pe=new Set;function ro(e){Pe.size||setTimeout(()=>{for(let t of Pe)(!t.contexts||t.contexts.size===0)&&he.get(t.target).delete(t.key);Pe.clear()}),Pe.add(e)}function Zt(e,t){if(Je(e),t.clearValue&&(e.value=void 0,e.assertValue=void 0,e.lastValue=void 0),t.deleteEntry){if(e.deps){for(let n of e.deps)n.contexts.delete(e);e.deps=void 0}if(e.contexts){for(let n of e.contexts)n.deps.delete(e);e.contexts=void 0}ro(e)}}function F(e,t,n={}){let o=C(e,t);Zt(o,n)}function Ce(e,t={}){let n=he.get(e);if(n)for(let o of n.values())Zt(o,t)}function Ye(e){if(e.reflect)throw TypeError("'reflect' option is not supported for 'render' property");let{value:t,observe:n}=e;if(typeof t!="function")throw TypeError(`Value for 'render' property must be a function: ${typeof t}`);let o={connect:e.connect,observe:n?(r,i,a)=>{n(r,i(),a)}:(r,i)=>{i()}},s=e.shadow?{mode:e.shadow.mode||"open",delegatesFocus:e.shadow.delegatesFocus||!1}:e.shadow;return s?o.value=r=>{let i=r.shadowRoot||r.attachShadow(s),a=t(r);return()=>(a(r,i),i)}:s===!1?o.value=r=>{let i=t(r);return()=>(i(r,r),r)}:o.value=r=>{let i=t(r);return()=>i(r)},o}function Qt(e,t,n){!t&&t!==0?e.removeAttribute(n):e.setAttribute(n,t===!0?"":t)}function Ze(e,t){let n=typeof t.value,o=n==="object"?Object.freeze(t.value):t.value;switch(n){case"string":t.value=(r,i)=>i!==void 0?String(i):o;break;case"number":t.value=(r,i)=>i!==void 0?Number(i):o;break;case"boolean":t.value=(r,i)=>i!==void 0?!!i:o;break;case"function":t.value=o;break;default:t.value=(r,i=o)=>i}let s=t.observe;if(t.reflect){let r=I(e),i=typeof t.reflect=="function"?(a,f,u)=>Qt(a,t.reflect(f),u):Qt;s=t.observe?(a,f,u)=>{i(a,f,r),t.observe(a,f,u)}:(a,f)=>i(a,f,r)}return{...t,observe:s,writable:n!=="function"||o.length>1}}var R=new WeakMap,en=new WeakMap,tn=new WeakMap;function so(e,t){for(let n of this.connects)t.add(n(e));for(let n of this.observers)t.add(n(e))}function Qe(e,t){if(t){let r=R.get(t);if(e===r)return t;for(let i of Object.keys(r))i!=="tag"&&delete t.prototype[i]}else t=class extends globalThis.HTMLElement{constructor(){super();for(let r of t.writable)if(hasOwnProperty.call(this,r)){let i=this[r];delete this[r],this[r]=i}else{let i=this.getAttribute(I(r));i!==null&&(this[r]=i===""&&typeof this[r]=="boolean"||i)}}connectedCallback(){let r=new Set;tn.set(this,r);let i=so.bind(t,this,r);en.set(this,i),Ne(i)}disconnectedCallback(){qt(en.get(this));for(let r of tn.get(this))r&&r();Ce(this)}};R.set(t,Object.freeze(e));let n=new Set,o=new Set,s=new Set;for(let r of Object.keys(e)){if(r==="tag")continue;let i=e[r];if(typeof i!="object"||i===null)i={value:i};else if(!hasOwnProperty.call(i,"value"))throw TypeError(`The 'value' option is required for '${r}' property of the '${e.tag}' element`);i=r==="render"?Ye(i):Ze(r,i),i.writable&&s.add(r),Object.defineProperty(t.prototype,r,{get:function(){return A(this,r,i.value)},set:i.writable?function(f){me(this,r,f)}:void 0,enumerable:!0,configurable:!0}),i.connect&&n.add(a=>i.connect(a,r,()=>{F(a,r)})),i.observe&&o.add(a=>ke(a,r,i.value,i.observe))}return t.connects=n,t.observers=o,t.writable=s,t}var ge=new Map;function io(e){ge.size||B.then(()=>{ne(globalThis.document.body,t=>{if(ge.has(t.constructor)){let n=ge.get(t.constructor),o=R.get(t.constructor);t.disconnectedCallback();for(let s of Object.keys(o)){let r=typeof o[s],i=r!=="object"&&r!=="function"&&o[s]!==n[s];i&&t.removeAttribute(I(s)),F(t,s,{clearValue:i})}t.connectedCallback()}}),ge.clear()}),ge.set(e,R.get(e))}var Ae=new Set;function nn(e){if(!e.tag)throw TypeError("Error while defining an element: 'tag' property with dashed tag name is required");if(Ae.has(e.tag))throw TypeError(`Error while defining '${e.tag}' element: tag name is already defined`);Ae.size||B.then(()=>Ae.clear()),Ae.add(e.tag);let t=globalThis.customElements.get(e.tag);if(t){if(R.get(t))return io(t),Qe(e,t),e;throw TypeError(`Custom element with '${e.tag}' tag name already defined outside of the hybrids context`)}return globalThis.customElements.define(e.tag,Qe(e)),e}function lo(e,{root:t="",prefix:n}={}){for(let o of Object.keys(e)){let s=e[o];if(!s.tag){let r=I([].concat(t).reduce((i,a)=>i.replace(a,""),o).replace(/^[./]+/,"").replace(/\//g,"-").replace(/\.[a-zA-Z]+$/,""));s.tag=n?`${n}-${r}`:r}nn(s)}return e}var et=Object.freeze(Object.assign(nn,{compile:e=>Qe(e),from:lo}));var Re=new WeakMap,on=new WeakMap;function rn(e,t){let n=on.get(e);if(n===t)return;let o=et.compile(t);on.set(e,t),Re.has(e)&&Re.get(e)(),Re.set(e,()=>{o.prototype.disconnectedCallback.call(e);for(let[r]of s)delete e[r];Re.delete(e)});let s=Object.entries(Object.getOwnPropertyDescriptors(o.prototype));o.prototype.connectedCallback.call(e);for(let[r,i]of s)if(!(r==="constructor"||r==="connectedCallback"||r==="disconnectedCallback")&&(Object.defineProperty(e,r,{...i,configurable:!0}),n)){let a=typeof t[r],f=a!=="object"&&a!=="function"&&t[r]!==n[r];f&&e.removeAttribute(I(r)),F(e,r,{clearValue:f})}}function ao(e,t){let n=e.parentElement||e.parentNode.host;for(;n;){let o=R.get(n.constructor);if(o&&t(o,e))return n;n=n.parentElement||n.parentNode&&n.parentNode.host}return n||null}function sn(e){let t=typeof e=="function"?e:n=>n===e;return{value:n=>ao(n,t),connect(n,o,s){return s}}}function tt(e,t,n,o=[],s=e){for(let r of Array.from(e.children)){let i=R.get(r.constructor);i&&t(i,s)?(o.push(r),n.deep&&n.nested&&tt(r,t,n,o,s)):n.deep&&tt(r,t,n,o,s)}return o}function ln(e,t={deep:!1,nested:!1}){let n=typeof e=="function"?e:o=>o===e;return{value:o=>tt(o,n,t),connect(o,s,r){let i=new globalThis.MutationObserver(r);return i.observe(o,{childList:!0,subtree:!!t.deep}),()=>{i.disconnect()}}}}var ft=Symbol("store.connect"),O=new WeakMap,_e=new WeakMap,ee=new WeakMap;function ut(e,t,n){if(n&&(O.set(n,null),_e.set(n,t)),O.set(t,e),ee.has(e)){let o=t&&e.isInstance(t)?t:null,s=n&&e.isInstance(n)?n:null;if(o!==s){let r=s?s.id:o.id;ee.get(e).forEach(i=>{try{i(r,o,s)}catch(a){console.error(a)}})}}return t}function co(e,t,n){return ut(e,t,n),e.invalidate&&(e.storage.loose||!n||!e.isInstance(n))&&e.invalidate(),t}function te(e,t,n,o=!0){return Yt(e,t,o?co:ut,n),n}var Me;function _(){return Me||(Me=Date.now(),B.then(()=>{Me=void 0})),Me}var ze=new WeakMap;function nt(e){let t=ze.get(e);return t||(t=_(),ze.set(e,t)),t}function We(e){return ze.set(e,_()),e}function an(e){return ze.set(e,1),e}function it(e){return globalThis.btoa(Array.from(e).reduce((t,n)=>Math.imul(31,t)+n.charCodeAt(0)|0,0))}var ot="hybrids:store:cache",rt={},st;function fo(e,t){let n=`${ot}:${it(JSON.stringify(e.model))}`;return rt[n]=_()+t,st||(st=Promise.resolve().then(()=>{let o=JSON.parse(globalThis.localStorage.getItem(ot))||{},s=_();for(let r of Object.keys(o))!rt[r]&&o[r]<s&&(globalThis.localStorage.removeItem(r),delete o[r]);globalThis.localStorage.setItem(ot,JSON.stringify({...o,...rt})),st=null})),n}function uo(e,t){let n=M(e);if(typeof t!="function")throw TypeError(`The second argument must be a function: ${typeof t}`);let o=ee.get(n)||new Set;return o.add(t),ee.set(n,o),()=>{o.delete(t),o.size===0&&ee.delete(n)}}function mn(e,t){typeof t=="function"&&(t={get:t});let n={cache:!0,loose:!1,...t};if(n.observe){let o=n.observe;if(typeof o!="function")throw TypeError(`Storage 'observe' property must be a function: ${typeof o}`);let s=ee.get(e)||new Set;s.add(o),ee.set(e,s)}if(n.cache===!1||n.cache===0)n.validate=o=>!o||nt(o)===_();else if(typeof n.cache=="number")n.validate=o=>!o||nt(o)+n.cache>_();else{if(n.cache!==!0)throw TypeError(`Storage 'cache' property must be a boolean or number: ${typeof n.cache}`);n.validate=o=>nt(o)!==1}if(n.get||(n.get=o=>{throw we(Q(o))}),n.offline)try{let o=n.offline===!0,s=o?1e3*60*60*24*30:n.offline,r=fo(e,s),i=JSON.parse(globalThis.localStorage.getItem(r))||{},a;n.offline=Object.freeze({key:r,threshold:s,get:o?f=>hasOwnProperty.call(i,f)?JSON.parse(i[f][1]):null:f=>{if(hasOwnProperty.call(i,f)){let u=i[f];return u[0]+s<_()?(delete i[f],null):JSON.parse(u[1])}return null},set(f,u){return u?i[f]=[_(),JSON.stringify(u,function(l,c){if(c===this[""])return c;if(c&&typeof c=="object"){let y=O.get(c);if(y===e&&c.id===f)return String(c);if(y&&y.storage.offline)return y.list?c.map(h=>(De.get(y.model).storage.offline.set(h.id,h),`${h}`)):(y.storage.offline.set(c.id,c),`${c}`)}return c})]:delete i[f],a||(a=Promise.resolve().then(()=>{let m=_();for(let l of Object.keys(i))i[l][0]+s<m&&delete i[l];globalThis.localStorage.setItem(r,JSON.stringify(i)),a=null})),u}})}catch(o){console.error("Error while setup offline cache",o),n.offline=!1}return Object.freeze(n)}function po(e){return{get:e.enumerable?()=>null:()=>e.create({}),set:e.enumerable?(t,n)=>n:(t,n)=>n===null?{id:t}:n,list:e.enumerable&&function(n){if(n)throw TypeError("Memory-based model definition does not support id");let o=[];for(let{key:s,value:r}of qe(e))s!==e&&r&&!Ve(r)&&o.push(s);return o},loose:!0}}function M(e,t){return Array.isArray(e)?yo(e[0],t):wn(e,t)}function cn(e,t){switch(e){case"string":return n=>n!=null?String(n):"";case"number":return Number;case"boolean":return Boolean;default:throw TypeError(`The value of the '${t}' must be a string, number or boolean: ${e}`)}}function G(e,t,n){let o=C(e,"state").value;return me(e,"state",{state:t,value:n,error:(t==="error"?n:o?.error)||!1},!0),e}function ie(e){return A(e,"state",(t,n={state:"ready",error:!1})=>n)}function gn(e){return e?(e^Math.random()*16>>e/4).toString(16):("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,gn)}var dt=new WeakSet,lt=new WeakMap;function ho(e){if(typeof e!="function")throw TypeError(`The first argument must be a function: ${typeof e}`);return dt.add(e),e}function mo(e){if(e==null)throw TypeError(`The value must be defined: ${e}`);if(!dt.has(e)&&typeof e=="function")throw TypeError("A function is not supported as the value of the record");let t=Object.freeze({});return lt.set(t,e),t}var bn=new WeakMap;function go(e,t,n){let o=n.model[t];if(dt.has(o)&&(o=o()),lt.has(o)){let r=lt.get(o);return r=typeof r=="function"?r():r,{defaultValue:{id:!0,[t]:r},type:"record"}}let s=typeof o;if(o instanceof String||o instanceof Number||o instanceof Boolean){let r=bn.get(o);if(!r)throw TypeError(S(e,`You must use primitive ${typeof o.valueOf()} value for '${t}' property of the provided model definition`));o=o.valueOf(),s=typeof o,n.checks.set(t,r)}return{defaultValue:o,type:s}}var yn=new WeakMap;function S(e,t){let n=yn.get(e)||e,o=`Model definition
${JSON.stringify(n,null,2)}`.split(`
`).map(s=>`| ${s}`).join(`
`);return`${t}

${o}
`}var bo=Promise.resolve(),De=new WeakMap;function wn(e,t){if(typeof e!="object"||e===null)throw TypeError(`Model definition must be an object: ${typeof e}`);let n=De.get(e);if(n&&!n.enumerable){if(t&&!n.nested)throw TypeError(S(e,"Provided model definition for nested object already used as a root definition"));if(!t&&n.nested)throw TypeError(S(e,"Nested model definition cannot be used outside of the parent definition"))}if(!n){let o=e[ft];typeof o=="object"&&Object.freeze(o);let s,r=hasOwnProperty.call(e,"id"),i=!!o,a=new Map,f={};Object.defineProperty(f,"toString",{value:function(){return this.id}});let u=Object.create(f);n={model:e,external:i,enumerable:r,nested:!r&&!i&&t,placeholder:l=>{let c=Object.create(u);return O.set(c,n),re.set(c,Ie),r&&(c.id=l),Object.freeze(c)},isInstance:l=>Object.getPrototypeOf(l)!==u,invalidate:()=>{s||(s=bo.then(()=>{F(n,n,{clearValue:!0}),s=null}))},checks:a},De.set(e,n),n.storage=mn(n,o||po(n));let m=Object.keys(Object.freeze(e)).map(l=>{if(l!=="id"&&Object.defineProperty(u,l,{get(){throw Error(S(e,`Model instance in ${ie(this).state} state - use store.pending(), store.error(), or store.ready() guards`))},enumerable:!0}),l==="id"){if(e[l]!==!0)throw TypeError(S(e,"The 'id' property in the model definition must be set to 'true' or not be defined"));return(T,h,d)=>{let p;hasOwnProperty.call(h,"id")?p=pt(h.id):d?p=d.id:p=gn(),Object.defineProperty(T,"id",{value:p,enumerable:!0})}}let{defaultValue:c,type:y}=go(e,l,n);switch(y){case"function":return T=>{Object.defineProperty(T,l,{get(){return A(this,l,()=>c(this))}})};case"object":{if(c===null)throw TypeError(S(e,`The value for the '${l}' must be an object instance: ${c}`));if(Array.isArray(c)){let d=typeof c[0];if(d==="undefined")throw TypeError(S(e,`The first item of the '${l}' array must be defined`));if(d!=="object"){if(d==="function"&&![String,Number,Boolean].includes(c[0]))throw TypeError(S(e,`The array item for the '${l}' must be one of the primitive types constructor: String, Number, or Boolean`));let b=d==="function"?c[0]:cn(d,l),w=d==="function"?[]:Object.freeze(c.map(b));return(g,v,E)=>{if(hasOwnProperty.call(v,l)){if(!Array.isArray(v[l]))throw TypeError(`The value for '${l}' property must be an array: ${typeof v[l]}`);g[l]=Object.freeze(v[l].map(b))}else E&&hasOwnProperty.call(E,l)?g[l]=E[l]:g[l]=w}}let p=M(c,!0);if(p.external&&n.storage.offline&&p.storage.offline&&p.storage.offline.threshold<n.storage.offline.threshold)throw Error(S(e,`External nested model for '${l}' property has lower offline threshold (${p.storage.offline.threshold} ms) than the parent definition (${n.storage.offline.threshold} ms)`));if(p.enumerable&&c[1]){let b=c[1];if(typeof b!="object")throw TypeError(S(e,`Options for '${l}' array property must be an object instance: ${typeof b}`));b.loose&&(n.contexts=n.contexts||new Set,n.contexts.add(M(c[0])))}return(b,w,g)=>{if(hasOwnProperty.call(w,l)){if(!Array.isArray(w[l]))throw TypeError(`The value for '${l}' property must be an array: ${typeof w[l]}`);b[l]=p.create(w[l],!0)}else b[l]=g&&g[l]||!p.enumerable&&p.create(c)||[]}}let h=M(c,!0);if(h.enumerable||h.external){if(n.storage.offline&&h.storage.offline&&h.storage.offline.threshold<n.storage.offline.threshold)throw Error(S(e,`External nested model for '${l}' property has lower offline threshold (${h.storage.offline.threshold} ms) than the parent definition (${n.storage.offline.threshold} ms)`));return(d,p,b)=>{let w;if(hasOwnProperty.call(p,l)){let g=p[l];if(typeof g!="object"||g===null)g!=null&&(w={id:g});else{let v=O.get(g);if(v){if(v.model!==c)throw TypeError("Model instance must match the definition");w=g}else{let E=C(h,p[l].id).value;w=h.create(g,E&&h.isInstance(E)?E:void 0),te(h,w.id,w)}}}else w=b&&b[l];if(w){let g=w.id;Object.defineProperty(d,l,{get(){return A(this,l,()=>W(c,g))},enumerable:!0})}else d[l]=void 0}}return(d,p,b)=>{hasOwnProperty.call(p,l)?d[l]=p[l]===null?h.create({}):h.create(p[l],b&&b[l]):d[l]=b?b[l]:h.create({})}}case"record":{yn.set(c,e);let T=M(c,!0);return(h,d,p)=>{if(d[l]===null){h[l]={};return}if(d[l]===void 0){h[l]=p?.[l]??{};return}if(typeof d[l]!="object")throw TypeError(S(e,`The value for the '${l}' must be an object instance: ${typeof d[l]}`));let b=d[l],w={};if(p)for(let g of Object.keys(p[l]))hasOwnProperty.call(b,g)||Object.defineProperty(w,g,{get(){return p[l][g]},enumerable:!0,configurable:!0});for(let g of Object.keys(b)){if(b[g]===null)continue;let v=T.create({id:g,[l]:b[g]},{id:g,[l]:p&&p[l][g]});Object.defineProperty(w,g,{get(){return A(this,g,()=>v[l])},enumerable:!0})}h[l]=w}}default:{let T=cn(y,l);return(h,d,p)=>{hasOwnProperty.call(d,l)?h[l]=T(d[l]):p&&hasOwnProperty.call(p,l)?h[l]=p[l]:h[l]=c}}}});n.create=function(c,y){if(c===null)return null;if(typeof c!="object")throw TypeError(`Model values must be an object instance: ${c}`);let T=Object.create(f);for(let h of m)h(T,c,y);return O.set(T,n),re.set(T,Ie),Object.freeze(T)},Object.freeze(u),Object.freeze(n)}return n}var fn=Object.getOwnPropertyNames(Array.prototype).reduce((e,t)=>(t==="length"||t==="constructor"||Object.defineProperty(e,t,{get(){throw Error(S(W(O.get(this).model),`Model list instance in ${ie(this).state} state - use store.pending(), store.error(), or store.ready() guards`))}}),e),[]),at=new WeakMap;function yo(e,t){let n=at.get(e);if(n&&!n.enumerable&&!t&&n.nested)throw TypeError(S(e,"Nested model definition cannot be used outside of the parent definition"));if(!n){let o=wn(e),s=new Set;if(o.storage.loose&&s.add(o),!t){if(!o.enumerable)throw TypeError(S(e,"Provided model definition does not support listing (it must be enumerable - set `id` property to `true`)"));if(!o.storage.list)throw TypeError(S(e,"Provided model definition storage does not support `list` action"))}t=!o.enumerable&&!o.external&&t,n={list:!0,nested:t,model:e,contexts:s,enumerable:o.enumerable,external:o.external,placeholder:r=>{let i=Object.create(fn);return O.set(i,n),Object.defineProperties(i,{id:{value:r},toString:{value:function(){return this.id}}}),Object.freeze(i)},isInstance:r=>Object.getPrototypeOf(r)!==fn,create(r,i=!1){if(r===null)return null;let a=[];for(let f of r){let u;if(typeof f=="object"&&f!==null){u=Q(f.id);let m=O.get(f),l=f;if(m){if(m.model!==e)throw TypeError("Model instance must match the definition")}else{let c=o.enumerable&&C(o,u).value;l=o.create(f,c&&o.isInstance(c)?c:void 0),o.enumerable&&(u=Q(l.id),te(o,u,l,i))}o.enumerable||a.push(l)}else{if(!o.enumerable)throw TypeError(`Model instance must be an object: ${typeof f}`);u=Q(f)}if(o.enumerable){let m=a.length;Object.defineProperty(a,m,{get(){return A(this,m,()=>W(e,u))},enumerable:!0})}}return Object.defineProperties(a,{id:{value:r.id},toString:{value:function(){return this.id}}}),O.set(a,n),re.set(a,Ie),Object.freeze(a)}},n.storage=Object.freeze({...mn(n,{cache:o.storage.cache,get:!t&&(r=>o.storage.list(r))}),offline:o.storage.offline&&{threshold:o.storage.offline.threshold,get:r=>{let i=Q(r),a=o.storage.offline.get(it(String(i)));return a?(a=a.map(f=>o.storage.offline.get(f)),a.id=i,a):null},set:(r,i)=>{o.storage.offline.set(it(String(Q(r))),i.map(a=>(o.storage.offline.set(a.id,a),a.id)))}}}),at.set(e,Object.freeze(n))}return n}function pt(e){if(typeof e!="object")return e!==void 0?String(e):e;let t={};for(let n of Object.keys(e).sort()){if(typeof e[n]=="object"&&e[n]!==null)throw TypeError(`You must use primitive value for '${n}' key: ${typeof e[n]}`);t[n]=e[n]}return t}function Q(e){return e=pt(e),typeof e=="object"?JSON.stringify(e):e}var Tn=new WeakSet;function we(e,t){let n=Error(S(e,`Model instance ${t!==void 0?`with '${t}' id `:""}does not exist`));return Tn.add(n),n}function be(e,t){return je()&&!Tn.has(t)&&console.error(t),G(e,"error",t)}function W(e,t){let n=M(e),o;if(n.enumerable){if(o=Q(t),!o&&!n.list&&!Te.get(n))throw TypeError(S(e,`Provided model definition requires non-empty id: "${o}"`))}else if(t!==void 0)throw TypeError(S(e,`Provided model definition does not support id: ${JSON.stringify(t)}`));let{offline:s,validate:r}=n.storage,i=C(n,o),a=i.value;return a&&(i.resolved=i.resolved&&r(a)||ie(a).state==="pending"),A(n,o,()=>{if(t=pt(t),n.contexts)for(let l of n.contexts)A(l,l,_);let f=()=>a||s&&n.create(s.get(o))||n.placeholder(t),u;try{u=n.storage.get(t)}catch(l){return We(be(f(),l))}if(!(u instanceof Promise)&&u!==void 0&&typeof u!="object")throw TypeError(S(e,`Storage 'get' method must return a Promise, an instance, or null: ${u}`));try{if(typeof u!="object"||u===null)throw s&&s.set(o,null),we(e,o)}catch(l){return We(be(f(),l))}if(u instanceof Promise)return u=u.then(l=>{if(l!==void 0&&typeof l!="object")throw TypeError(S(e,`Storage 'get' method must resolve to an instance, or null: ${l}`));if(typeof l!="object"||l===null)throw s&&s.set(o,null),we(e,o);l.id!==t&&(l.id=t);let c=n.create(l);return s&&s.set(o,c),te(n,o,We(c))}).catch(l=>te(n,o,be(f(),l))),G(f(),"pending",u);u.id!==t&&(u.id=t);let m=n.create(u);return s&&Promise.resolve().then(()=>{s.set(o,m)}),ut(n,We(m),a)})}var Te=new WeakMap;function un(e){let t=Object.keys(e),n=Error(`Model validation failed (${t.join(", ")}) - read the details from 'errors' property`);return n.errors=e,n}function ye(e,t={}){let n=O.get(e);if(n===null&&(e=_e.get(e),n=O.get(e)),n===null)throw Error("Provided model instance has expired. Haven't you used stale value?");let o=!!n;if(n||(n=M(e)),n.nested)throw S(n.model,TypeError("Setting provided nested model instance is not supported, use the root model instance"));if(n.list)throw TypeError("Listing model definition does not support 'set' method");if(!n.storage.set)throw S(n.model,TypeError("Provided model definition storage does not support 'set' method"));if(!o&&!n.enumerable&&(o=!0,e=W(e)),o){let c=se(e);if(c)return c.then(y=>ye(y,t))}let s=Te.get(n),r;if(n.enumerable&&!o&&(!t||typeof t!="object"))throw TypeError(`Values must be an object instance: ${t}`);if(!s&&t&&hasOwnProperty.call(t,"id"))if(n.enumerable){if(!o||t.id!==e.id)throw TypeError(`You cannot change the 'id' property of the model instance: ${t.id}`)}else throw TypeError(`Values must not contain 'id' property: ${t.id}`);let i=n.create(t,o?e:void 0),a=t?Object.keys(t):[],f={},u=o&&s&&Ve(e),m=!1;if(i&&n.checks.size)for(let[c,y]of n.checks.entries()){if(a.indexOf(c)===-1&&(u&&u.errors&&u.errors[c]&&(m=!0,f[c]=u.errors[c]),s&&i[c]==n.model[c]))continue;let T;try{T=y(i[c],c,i)}catch(h){T=h}T!==!0&&T!==void 0&&(m=!0,f[c]=T||!0)}let l;try{if(m&&!s)throw un(f);r=i?i.id:e.id,l=n.storage.set(o?r:void 0,i,a)}catch(c){return o&&G(e,"error",c),Promise.reject(c)}if(!(l instanceof Promise)&&l!==void 0&&typeof l!="object")throw TypeError(S(n.model,`Storage 'set' method must return a Promise, an instance, or null: ${l}`));return l=Promise.resolve(l).then(c=>{if(c!==void 0&&typeof c!="object")throw TypeError(S(n.model,`Storage 'set' method must resolve to an instance or null: ${c}`));let y=c===i?i:n.create(c);if(o&&y&&r!==y.id)throw TypeError(S(n.model,`Local and storage data must have the same id: '${r}', '${y.id}'`));let T=y?y.id:r;return m&&s&&G(y,"error",un(f)),s&&o&&hasOwnProperty.call(c,"id")&&(!i||i.id!==e.id)?T=e.id:n.storage.offline&&n.storage.offline.set(T,y),te(n,T,y||be(n.placeholder(T),we(n.model,r)),!0)}).catch(c=>{throw c=c!==void 0?c:Error("Undefined error"),o&&G(e,"error",c),c}),o&&G(e,"pending",l),l}function wo(e,t){if(typeof t!="object")throw TypeError(`Values must be an object instance: ${t}`);let n=O.get(e);if(n===null&&(e=_e.get(e),n=O.get(e)),n===null)throw Error("Provided model instance has expired. Haven't you used stale value?");if(n===void 0){if(!t)throw TypeError("Values must be defined for usage with model definition");n=M(e),e=void 0}else if(t&&hasOwnProperty.call(t,"id"))throw TypeError(`Values must not contain 'id' property: ${t.id}`);if(n.list)throw TypeError("Listing model definition is not supported in sync method");let o=n.create(t,e),s=t?o.id:e.id;return te(n,s,o||be(n.placeholder(s),we(n.model,s)))}function ht(e,t=!0){if(typeof e!="object"||e===null)throw TypeError(`The first argument must be a model instance or a model definition: ${e}`);let n=O.get(e);if(n===null)throw Error("Provided model instance has expired. Haven't you used stale value from the outer scope?");if(n){let o=t&&n.storage.offline;o&&o.set(e.id,null),an(e),F(n,e.id,{clearValue:t,deleteEntry:t})}else{if(!De.get(e)&&!at.get(e[0]))return;n=M(e);let o=t&&n.storage.offline;for(let s of qe(n))s.key!==n&&(o&&o.set(s.key,null),an(s.value));Ce(n,{clearValue:t,deleteEntry:t})}}function se(...e){let t=!1,n=e.map(o=>{try{let{state:s,value:r}=ie(o);if(s==="pending")return t=!0,r}catch{}return Promise.resolve(o)});return t&&(e.length>1?Promise.all(n):n[0])}function En(e,t){e=_e.get(e)||e,O.get(e)||(e=W(e,t));let n=se(e);if(!n){let o=Ve(e);return o?Promise.reject(o):Promise.resolve(e)}return n.then(o=>En(o))}function Ve(e,t){if(e===null||typeof e!="object")return!1;let n=ie(e);if(t!==void 0){let o=typeof n.error=="object"&&n.error&&n.error.errors;return t===null?!o&&n.error:o[t]}return n.error}function ct(...e){return e.length>0&&e.every(t=>{let n=O.get(t);return!!(n&&n.isInstance(t))})}function dn(e,t){return e={...e,...t},delete e.id,e}function To(e,t={}){let n=O.get(e);if(!n||!Te.has(n))throw TypeError(`Provided model instance is not a draft: ${e}`);if(se(e))throw Error("Model draft in pending state");let o=Te.get(n),s;if(C(o,e.id).value){let r=W(o.model,e.id);s=Promise.resolve(se(r)||r).then(i=>ye(i,dn(e,t)))}else s=ye(o.model,dn(e,t));return s=s.then(r=>(G(e,"ready"),ye(e,r).then(()=>r))).catch(r=>(G(e,"error",r),Promise.reject(r))),G(e,"pending",s),s}function Eo(e,t){return!!e||`${t} is required`}function vo(e,t=Eo,n=""){switch(typeof e){case"string":e=new String(e);break;case"number":e=new Number(e);break;case"boolean":e=new Boolean(e);break;default:throw TypeError(`Default value must be a string, number or boolean: ${typeof e}`)}let o;if(t instanceof RegExp)o=s=>t.test(s)||n;else if(typeof t=="function")o=(...s)=>{let r=t(...s);return r!==!0&&r!==void 0&&n||r};else throw TypeError(`The second argument must be a RegExp instance or a function: ${typeof t}`);return bn.set(e,o),e}function vn(e){return e&&O.has(e)?e.id:e??void 0}function pn(e,t,n){if(n=vn(n),!t.enumerable&&!t.list)return W(e,n);let o=Le(),s=n!==void 0||t.list?W(e,n):void 0;if(o&&s&&s.id!==o.id&&ct(o)&&!ct(s)){let r=O.get(o),i=Object.freeze(Object.create(o));return O.set(i,r),me(i,"state",ie(s),!0),i}return s}function hn(e,t,n,o){let s=Le();if(n=vn(n??s?.id),n===void 0&&!s&&o==null)if(t.enumerable){let r=t.create({});n=r.id,te(t,r.id,r,!1)}else ht(t.model);return W(e,n)}function Ie(e,t={}){let n=M(e);if(t.id!==void 0&&typeof t.id!="function"){let s=t.id;t.id=r=>r[s]}if(t.id&&!n.enumerable)throw TypeError("Store factory for singleton model definition does not support 'id' option");let o;if(t.draft){if(n.list)throw TypeError("Draft mode is not supported for listing model definition");return o=M({...e,[ft]:{get(s){let r=Le();if(r)return r;let i=W(n.model,s);return se(i)||i},set(s,r){return r===null?{id:s}:r}}}),Te.set(o,n),e=o.model,{value:t.id?(s,r)=>hn(e,o,t.id(s),r):(s,r)=>hn(e,o,r,r),connect:n.enumerable?(s,r)=>()=>{ht(s[r],!0)}:void 0}}return{value:t.id?s=>pn(e,n,t.id(s)):(s,r)=>pn(e,n,r)}}var $o=Object.freeze(Object.assign(Ie,{connect:ft,get:W,set:ye,sync:wo,clear:ht,pending:se,error:Ve,ready:ct,submit:To,value:vo,resolve:En,ref:ho,record:mo,observe:uo}));var Ee=globalThis.document&&globalThis.document.startViewTransition!==void 0&&function e(t){return async function n(o,s){if(t.useLayout=n.useLayout,e.instance){console.warn(`${oe(o)}: view transition already in progress`),e.instance.finished.finally(()=>{t(o,s)});return}e.instance=globalThis.document.startViewTransition(()=>{t(o,s)}),e.instance.finished.finally(()=>{e.instance=void 0})}}||(e=>e);var gt=Symbol("router.connect"),P=new WeakMap,Et=new WeakMap,U=new WeakMap,On=new WeakMap,V=null,vt=new Set,bt=new WeakMap,jn=new WeakMap;function $n(){let e=U.get(V)[0];if(!e)return;let t=globalThis.document.activeElement;jn.set(e,V.contains(t)&&t);let n=new Map;for(let o of[globalThis.document.documentElement,globalThis.document.body])n.set(o,{left:o.scrollLeft,top:o.scrollTop});ne(e,o=>{(o.scrollLeft||o.scrollTop)&&n.set(o,{left:o.scrollLeft,top:o.scrollTop})}),bt.set(e,n)}function yt(e){if(e.tabIndex===-1){let t=e.style.outline;e.tabIndex=0,e.style.outline="none",e.addEventListener("blur",()=>{e.removeAttribute("tabindex"),e.style.outline=t},{once:!0})}e.focus({preventScroll:!0})}async function xo(e){let t=globalThis.document.activeElement;await B,Ee.instance&&await Ee.instance.ready,yt(jn.get(e)||(V.contains(t)?t:V));let n=bt.get(e);if(n){let o=P.get(e),r=globalThis.history.state.find(a=>a.id===o.id),i=r&&r.params.scrollToTop;for(let[a,{left:f,top:u}]of n)a.scrollLeft=i?0:f,a.scrollTop=i?0:u;bt.delete(e)}else for(let o of[globalThis.document.documentElement,globalThis.document.body])o.scrollLeft=0,o.scrollTop=0;setTimeout(()=>{globalThis.history.scrollRestoration="auto"},0)}function Ke(e){return e===!0?1:e||""}var Ue=["scrollToTop"];function So(e,t){let[n,o=""]=e.split("?"),s=o?o.split(","):[],r=n.replace(/^\//,"").split("/"),i=r.reduce((a,f)=>{if(f.startsWith(":")){let u=f.slice(1);if(s.includes(u))throw Error(`The '${u}' already used in search params`);if(a.includes(u))throw Error(`The '${u}' already used in pathname`);a.push(u)}return a},[]);return{browserUrl:e,pathnameParams:i,paramsKeys:[...s,...i],url(a,f=!1){let u="";for(let l of r){if(l.startsWith(":")){let c=l.slice(1);if(!hasOwnProperty.call(a,c))throw Error(`The '${c}' parameter must be defined for <${t}>`);l=Ke(a[c])}u+=`/${l}`}let m=new URL(u,globalThis.location.origin);for(let l of Object.keys(a))i.includes(l)||f&&(Ue.includes(l)||!s.includes(l))||m.searchParams.append(l,Ke(a[l]));return m},match(a){let f={},u=a.pathname.replace(/^\//,"").split("/");if(u.length!==r.length)return null;for(let m=0;m<u.length;m+=1){let l=u[m],c=r[m];if(c.startsWith(":")){let y=c.slice(1);f[y]=l}else if(l!==c)return null}for(let[m,l]of a.searchParams)f[m]=l;return f}}}function $e(e,t){return e.stack.some(n=>n===t?!0:$e(n,t))}function Nn(e){e.browserUrl&&vt.add(e);for(let t of e.stack)Nn(t)}function wt(e,t,n=null,o=null){return typeof e=="function"&&(e=e()),e=[].concat(e),e.map(s=>{let r=P.get(s);if(r&&$e(r,n))throw Error(`<${r.id}> cannot be in the stack of <${n.id}>, as it is an ancestor in the stack tree`);return jo(s,t,n,o)})}function Oo(e,t){let n=Object.values(e).map(o=>On.get(o)).filter(o=>o);if(n.length){if(n.length>1)throw TypeError(`<${t.id}> must contain at most one nested router, found: ${n.length}`);if(t.dialog)throw TypeError(`Nested routers are not supported in dialogs. Remove the router property definition from <${t.id}>`);if(t.browserUrl)throw TypeError(`A view with nested router must not have the url option. Remove the url option from <${t.id}>`)}return n[0]}function k(e){let t=globalThis.customElements.get(e);return P.get(t)}function jo(e,t,n,o){let s=e.tag,r=k(s);if(r&&r.hybrids!==e&&(r=null),r)r.parent=n,r.nestedParent=o,n&&!n.stack.includes(r)&&n.stack.push(r);else{let a=globalThis.customElements.get(s);if(!a||R.get(a)!==e)throw Error(`<${s}> view must be defined by 'define()' function before it can be used in router factory`);let f=null,u={dialog:!1,guard:!1,multiple:!1,replace:!1,...e[gt]},{connects:m}=a;if(u.dialog&&m.add(h=>{let d=V,p=w=>{U.get(d)[0]===h&&w.key==="Escape"&&(w.stopPropagation(),globalThis.history.go(-1))},b=w=>{U.get(d)[0]===h&&!h.contains(w.target)&&w.target!==h&&yt(h)};return d.addEventListener("focusin",b),d.addEventListener("focusout",b),h.addEventListener("keydown",p),yt(h),()=>{d.removeEventListener("focusin",b),d.removeEventListener("focusout",b),h.removeEventListener("keydown",p)}}),u.url){if(u.dialog)throw Error(`The 'url' option is not supported for dialogs - remove it from <${s}>`);if(typeof u.url!="string")throw TypeError(`The 'url' option in <${s}> must be a string: ${typeof u.url}`);f=So(u.url,s);for(let h of f.paramsKeys){let d=Object.getOwnPropertyDescriptor(a.prototype,h);if(!d||!d.set)throw Error(`'${h}' parameter from the url is not ${d?"writable":"defined"} in <${s}>`)}}let l=[...a.writable],c=l.filter(h=>!t.params.includes(h)&&!Ue.includes(h)),y=f?c.filter(h=>!f.pathnameParams.includes(h)):c;m.add(h=>ke(h,gt,d=>{let p={};for(let b of c){let w=d[b];w===void 0||w===e[b]||typeof w=="object"&&w.toString===Object.prototype.toString?p[b]=void 0:p[b]=Ke(w).toString()}return p},(d,p,b)=>{if(!b||!globalThis.history.state)return;let w=globalThis.history.state,g=w.findIndex(E=>{if(E.id===s)return!0;if(E.nested){let $=E.nested;for(;$;){if($.id===s)return!0;$=$.nested}}}),v=w[g];for(;v.id!==s&&v.nested;)v=v.nested;p={...v.params,...p};for(let E of y)p[E]===void 0&&delete p[E];globalThis.history.replaceState(w.map((E,$)=>$===g?r.getEntry(p):E),"",f?r.url(p,!0):"")}));let T;if(u.guard&&(T=()=>{try{return u.guard()}catch(h){return console.error(h),!1}}),r={id:s,hybrids:e,dialog:u.dialog,multiple:u.multiple,replace:u.replace,guard:T,parent:n,nestedParent:o,nestedRoots:void 0,parentsWithGuards:void 0,stack:[],...f||{url(h){let d=new URL("",globalThis.location.origin);for(let p of Object.keys(h))d.searchParams.append(p,Ke(h[p]));return new URL(`${t.url}#@${s}${d.search}`,globalThis.location.origin)},match(h){let d={};for(let[p,b]of h.searchParams)(l.includes(p)||Ue.includes(p))&&(d[p]=b);return d}},create(){let h=new a;return P.set(h,r),h},getEntry(h={},d){let p={};for(let g of Object.keys(h))l.includes(g)&&(p[g]=h[g]);let b={id:s,params:p,...d},w=r.parentsWithGuards.find(g=>!g.guard());if(w)return w.getEntry(h,{from:b});if(r.guard&&r.guard())return{...r.stack[0].getEntry(h)};if(r.nestedParent)return r.nestedParent.getEntry(h,{nested:b});for(let g of Ue)hasOwnProperty.call(h,g)&&(b.params[g]=h[g]);return b}},P.set(e,r),P.set(a,r),n&&!n.stack.includes(r)&&n.stack.push(r),u.stack){if(u.dialog)throw Error(`The 'stack' option is not supported for dialogs - remove it from <${s}>`);wt(u.stack,t,r,o)}}for(n||Nn(r),r.parentsWithGuards=[];n;)n.guard&&r.parentsWithGuards.unshift(n),n=n.parent;let i=Oo(e,r);return i&&(r.nestedRoots=wt(i.views,{...t,...i},r,r),r.stack=r.stack.concat(r.nestedRoots)),r}function No(e,t={}){let n=P.get(e);return n?n.url(t):""}function xn(e){let t={};for(;e;)Object.assign(t,e.params),e=e.nested;return t}function Po({nested:e=!1,scrollToTop:t=!1}={}){let n=globalThis.history.state;if(!n)return"";if(n.length>1){let r=n[0],i=1,a=n[i];if(e)for(;a.nested;)a=a.nested;else for(;r.id===a.id&&i<n.length-1;)i+=1,a=n[i];let f=xn(n[i]);return t?f.scrollToTop=!0:delete f.scrollToTop,k(a.id).url(f)}let o=n[0];if(e)for(;o.nested;)o=o.nested;let s=k(o.id).parent;if(s){for(;s&&s.guard;)s=s.parent;if(s)return s.url(xn(n[0]))}return""}function Lo(e={}){let t=globalThis.history.state;if(!t)return"";let n=t[0];if(n.from)return k(n.from.id).url({...n.from.params,...e});let o=k(n.id);return o.stack[0]?o.stack[0].url(e):""}function ko(e){let t=globalThis.history.state;if(!t)return"";let n=t[0];for(;n.nested;)n=n.nested;return k(n.id).url({...n.params,...e})}function Co(e,{stack:t=!1}={}){let n=globalThis.history.state;return n?(e=[].concat(e),e.some(o=>{let s=P.get(o);if(!s)throw TypeError(`Provided view is not connected to the router: ${o}`);let r=n[0];for(;r;){let i=k(r.id);if(i===s||t&&$e(s,i))return!0;r=r.nested}return!1})):!1}function Tt(e){let t,[n,o]=e.hash.split("?");if(n&&n.match(/^#@.+-.+/)&&(t=k(n.split("@")[1]),e=new URL(`?${o}`,globalThis.location.origin)),!t){for(let s of vt){let r=s.match(e);if(r)return s.getEntry(r)}return null}return t.getEntry(t.match(e))}function ve(e){if(e.defaultPrevented)return;let t;if(e.type==="click"){if(e.ctrlKey||e.metaKey)return;let n=e.composedPath().find(o=>o instanceof globalThis.HTMLAnchorElement);n&&(t=new URL(n.href,globalThis.location.origin))}else t=new URL(e.target.action,globalThis.location.origin);if(t&&t.origin===globalThis.location.origin){let n=Tt(t);n&&(e.preventDefault(),He(V,"navigate",{bubbles:!0,detail:{entry:n,url:t}}))}}var mt;function Ao(e,t){e.preventDefault(),mt=t;let n=e.composedPath(),o={type:e.type,ctrlKey:e.ctrlKey,metaKey:e.metaKey,target:e.target,defaultPrevented:!1,preventDefault:()=>{},composedPath:()=>n};return t.then(()=>{t===mt&&(ve(o),mt=null)})}function Pn(e,t,n){let o=U.get(e),s=[];for(let[f,u]of t.entries())(f===0||t[f-1].id!==u.id||k(u.id).multiple)&&s.push(u);let r=o.length-s.length;o=s.map((f,u)=>{let m=o[u+r],l=k(f.id),c;if(m){let y=P.get(m);if(l.id!==y.id||u===0&&l.replace)return l.create();c=m}else c=l.create();return c}),U.set(e,o);let i=o[0],a=Et.get(i);for(let[f,u]of Object.entries(t[0].params))f in i&&(i[f]=u);for(let f of n.params)f in i&&(i[f]=e[f]);return a&&a(),o}function Ro(e){let t=[];for(let[s,r]of globalThis.history.state.entries()){let i=0;for(;r;)t[i]=t[i]||[],t[i][s]=r,r=r.nested,i+=1}let n=0,o=0;for(;e;){let s=k(e.id),r=n;for(;r<t[o].length;r+=1){let i=t[o][r];if(s.dialog){if(i.id===e.id)return r;continue}if(i.id===e.id)if(s.multiple){if(s.pathnameParams&&s.pathnameParams.every(f=>e.params[f]===i.params[f])||Object.entries(e.params).every(([f,u])=>i.params[f]===u)){n=r;break}}else{n=r;break}let a=k(i.id);if($e(a,s)){if(s.multiple&&t[o][0].id===e.id){n-=1;break}if(r>0){n=r-1;break}else return a.guard?0:-1}}if(s.dialog)return-1;r===t[o].length&&(n=t[o].length-1),e=e.nested,o+=1}return n}function Sn(e,t){let n=globalThis.document.documentElement;if(e&&t.length>0){let o="";e.length>t.length?(o="forward",P.get(e[0].constructor).dialog&&(o+=" dialog")):e.length<t.length?(o="backward",P.get(t[0].constructor).dialog&&(o+=" dialog")):e[0]!==t[0]&&(o="replace"),n.setAttribute("router-transition",o)}else n.removeAttribute("router-transition")}function Mo(e,t,n){function o(){let l=U.get(e),c=Pn(e,globalThis.history.state,n);n.transition&&Sn(c,l),t();let y=c[0];P.get(y).dialog||xo(y)}function s(){if(globalThis.history.state)o();else{let l=new URL(globalThis.location.href),c=Tt(l);c&&(globalThis.removeEventListener("popstate",s),globalThis.addEventListener("popstate",()=>{globalThis.addEventListener("popstate",s),i(c)},{once:!0}),globalThis.history.back())}}function r(l,c,y){let T=globalThis.history.state,h=globalThis.history.state[l],d=l<T.length-1&&T.length>2?1:0;l+=d,h&&c.id===h.id&&(c={...h,...c});let p=b=>{b&&(globalThis.removeEventListener("popstate",p),globalThis.addEventListener("popstate",s));let w=d?"pushState":"replaceState",g=[c,...T.slice(l+(d?0:1))];globalThis.history[w](g,"",y),o()};l?(globalThis.removeEventListener("popstate",s),globalThis.addEventListener("popstate",p),globalThis.history.go(-l)):($n(),p())}function i(l){let c=globalThis.history.state,y=l;for(;y.nested;)y=y.nested;let T=k(y.id),h=T.browserUrl?T.url(y.params,!0):n.url,d=Ro(l);d>-1?r(d,l,h):($n(),globalThis.history.scrollRestoration="manual",globalThis.history.pushState([l,...c],"",h),o())}function a(l){i(l.detail.entry)}if(V)throw Error(`An element with root router already connected to the document: <${V.tagName.toLowerCase()}>`);let f;try{f=wt(n.views,n),V=e,Et.set(e,o)}catch(l){throw console.error(`Error while connecting router in <${e.tagName.toLowerCase()}>:`),l}let u=globalThis.history.state,m=new URL(globalThis.location.href);if(u){let l=U.get(e),c;for(c=u.length-1;c>=0;c-=1){let y=u[c];for(;y;){let T=k(y.id);if(!T||T.dialog&&l.length===0||!f.includes(T)&&!f.some(h=>$e(h,T)))break;y=y.nested}if(y)break}if(c>-1){let y=u[c+1];r(u.length-c-1,y||f[0].getEntry(u[0].params),n.url)}else{let y=u[0];for(;y.nested;)y=y.nested;let h=k(y.id).getEntry(y.params);i(h)}}else{let l=Tt(m)||f[0].getEntry();globalThis.history.replaceState([l],"",n.url),o()}return globalThis.addEventListener("popstate",s),e.addEventListener("click",ve),e.addEventListener("submit",ve),e.addEventListener("navigate",a),()=>{globalThis.removeEventListener("popstate",s),e.removeEventListener("click",ve),e.removeEventListener("submit",ve),e.removeEventListener("navigate",a),Sn(null),vt.clear(),V=null;let l=globalThis.history.state&&globalThis.history.state.length;l>1&&(globalThis.history.go(1-l),globalThis.history.replaceState(u,"",m))}}function Wo(e,t,n){let o=P.get(e);function s(){return globalThis.history.state.map(i=>{for(;i;){if(i.id===o.id)return i.nested;i=i.nested}return i}).filter(i=>i)}function r(){Pn(e,s(),n),t()}if(!s()[0]){let i=globalThis.history.state;globalThis.history.replaceState([o.nestedRoots[0].getEntry(i[0].params),...i.slice(1)],"")}r(),Et.set(e,r)}function zo(e,t){t={url:globalThis.location.href.replace(/#.*$/,""),params:[],...t,views:e};let n={value:o=>{let s=U.get(o)||[];return s.slice(0,s.findIndex(r=>!P.get(r).dialog)+1).reverse()},connect:(o,s,r)=>{for(let i of t.params)if(!(i in o))throw Error(`Property '${i}' for global parameters is not defined in <${o.tagName.toLowerCase()}>`);return U.has(o)||U.set(o,[]),P.has(o)?Wo(o,r,t):Mo(o,r,t)},observe:je()&&((o,s,r)=>{let i=s.length-1,a=s[i];if(r&&a===r[i])return;let f=P.get(o),u=globalThis.history.state[0],m=0;for(;f;)m+=1,u=u.nested,f=f.nestedParent;console.groupCollapsed(`[${o.tagName.toLowerCase()}]: navigated to <${u.id}> ($$${m})`);for(let[l,c]of Object.entries(u.params))console.log(`%c${l}:`,"font-weight: bold",c);console.groupEnd(),globalThis[`$$${m}`]=a})};return On.set(n,t),n}var Do=Object.freeze(Object.assign(zo,{connect:gt,debug:Xe,url:No,backUrl:Po,guardUrl:Lo,currentUrl:ko,resolve:Ao,active:Co}));var xe=new WeakMap;function z(e){let t=xe.get(e);return t||(xe.set(e,t={}),t)}function le(e){let t;for(;e&&(t=z(e))&&t.endNode;)e=t.endNode;return e}function H(e){if(e.nodeType===globalThis.Node.TEXT_NODE){let t=xe.get(e);if(t&&t.startNode){let n=le(t.endNode),o=t.startNode,s=n.nextSibling;for(;o;){let r=o.nextSibling;o.parentNode.removeChild(o),o=r!==s&&r}xe.set(e,{})}}else{let t=e.childNodes[0];for(;t;)e.removeChild(t),t=e.childNodes[0];xe.set(e,{})}}var Io=Date.now(),L=(e=0)=>`H-${Io}-${e}`;var $t=/^\d+$/,_o={block:(e,t)=>({display:"block","text-align":t}),inline:({display:e})=>({display:`inline${e?`-${e}`:""}`}),contents:{display:"contents"},hidden:{display:"none"},...["row","row-reverse","column","column-reverse"].reduce((e,t)=>(e[t]=(n,o="nowrap")=>({display:"flex","flex-flow":`${t} ${o}`}),e),{}),grow:(e,t=1)=>({"flex-grow":t}),shrink:(e,t=1)=>({"flex-shrink":t}),basis:(e,t)=>({"flex-basis":x(t)}),order:(e,t=0)=>({order:t}),grid:(e,t="1",n="",o="",s="")=>({display:"grid",...["columns","rows"].reduce((r,i)=>{let a=i==="columns"?t:n;return r[`grid-template-${i}`]=a&&a.split("|").map(f=>f.match($t)?`repeat(${f}, minmax(0, 1fr))`:x(f)).join(" "),r},{}),"grid-auto-flow":`${o} ${s&&"dense"}`}),area:(e,t="",n="")=>({"grid-column":t.match($t)?`span ${t}`:t,"grid-row":n.match($t)?`span ${n}`:n}),gap:(e,t=1,n="")=>({"column-gap":x(t),"row-gap":x(n||t)}),items:(e,t="start",n="")=>({"place-items":`${t} ${n}`}),content:(e,t="start",n="")=>({"place-content":`${t} ${n}`}),self:(e,t="start",n="")=>({"place-self":`${t} ${n}`}),center:{"place-items":"center","place-content":"center"},size:(e,t,n=t)=>({width:x(t),height:x(n),"box-sizing":"border-box"}),width:(e,t,n,o)=>({width:x(t),"min-width":x(n),"max-width":x(o),"box-sizing":"border-box"}),height:(e,t,n,o)=>({height:x(t),"min-height":x(n),"max-height":x(o),"box-sizing":"border-box"}),ratio:(e,t)=>({"aspect-ratio":t}),overflow:(e,t="hidden",n="")=>{let o=n?`-${t}`:"",s=n||t;return{[`overflow${o}`]:s,...s==="scroll"?{"flex-grow":e["flex-grow"]||1,"flex-basis":0,"overscroll-behavior":"contain","--webkit-overflow-scrolling":"touch"}:{}}},margin:(e,t="1",n,o,s)=>t.match(/top|bottom|left|right/)?{[`margin-${t}`]:x(n||"1")}:{margin:`${x(t)} ${x(n)} ${x(o)} ${x(s)}`},padding:(e,t="1",n,o,s)=>t.match(/top|bottom|left|right/)?{[`padding-${t}`]:x(n||"1")}:{padding:`${x(t)} ${x(n)} ${x(o)} ${x(s)}`},absolute:{position:"absolute"},relative:{position:"relative"},fixed:{position:"fixed"},sticky:{position:"sticky"},static:{position:"static"},inset:(e,t=0)=>{let n=x(t);return{top:n,right:n,bottom:n,left:n}},top:(e,t=0)=>({top:x(t)}),bottom:(e,t=0)=>({bottom:x(t)}),left:(e,t=0)=>({left:x(t)}),right:(e,t=0)=>({right:x(t)}),layer:(e,t=1)=>({"z-index":t}),"":(e,t,...n)=>{if(n.length<2)throw new Error("Generic rule '::' requires at least two arguments, eg.: ::[property]:[name]");return{[n[n.length-2]]:`var(--${n.join("-")})`}},view:(e,t)=>({"view-transition-name":t})},Vo={min:"min-content",max:"max-content",fit:"fit-content",full:"100%"},Uo={print:"print",portrait:"(orientation: portrait)",landscape:"(orientation: landscape)",hover:"(hover: hover)","any-hover":"(any-hover: hover)"};function x(e){return e=Vo[e]||e,/^-?\d+(\.\d+)*$/.test(String(e))?`${e*8}px`:e||""}var St=!!(globalThis.document&&globalThis.document.adoptedStyleSheets),ae;function Cn(){if(ae)return ae;if(St)ae=new globalThis.CSSStyleSheet;else{let e=globalThis.document.createElement("style");e.appendChild(globalThis.document.createTextNode("")),globalThis.document.head.appendChild(e),ae=e.sheet}return ae.insertRule(":host([hidden]) { display: none; }"),ae}var Ln=new WeakMap,xt=new WeakSet;function An(e){let t=e.getRootNode();if(xt.has(t))return;let n=Cn();if(St&&t.adoptedStyleSheets)t.adoptedStyleSheets=[...t.adoptedStyleSheets,n];else{if(t===globalThis.document)return;let o=Ln.get(t);o||(o=globalThis.document.createElement("style"),t.appendChild(o),Ln.set(t,o));let s="";for(let r=0;r<n.cssRules.length;r++)s+=n.cssRules[r].cssText;o.textContent=s}xt.add(t)}var kn=new Map;function Ot(e,t,n,o){let s=kn.get(e);s||(s=`l-${Math.random().toString(36).substr(2,5)}`,kn.set(e,s)),St||(xt=new WeakSet);let r=Cn(),[i,a=""]=t.split("@"),f=Object.entries(n.replace(/\s+/g," ").trim().split(" ").reduce((m,l)=>{let[c,...y]=l.split(":"),T=_o[c];if(!T)throw TypeError(`Unsupported layout rule: '${c}'`);return Object.assign(m,typeof T=="function"?T(m,...y.map(h=>h.match(/--.*/)?`var(${h})`:h)):T)},{})).reduce((m,[l,c])=>c!==void 0&&c!==""?m+`${l}: ${c};`:m,""),u=a.split(":").map(m=>m.split("|").map(l=>l&&(Uo[l]||`(min-width: ${l})`)).join(" and ")).join(", ");if(o){let m=`:host(:where(.${s}-s${i}))`,l=`:where(.${s}-c${i})`;[m,l].forEach(c=>{r.insertRule(u?`@media ${u} { ${c} { ${f} } }`:`${c} { ${f} }`,r.cssRules.length-1)})}else{let m=`.${s}${i}`;r.insertRule(u?`@media ${u} { ${m} { ${f} } }`:`${m} { ${f} }`,r.cssRules.length-1)}return s}var Be=new WeakMap;function Bo(e,t){let n=z(e),o=n.startNode,s=le(n.endNode);t.parentNode.insertBefore(e,t.nextSibling);let r=e,i=o;for(;i;){let a=i.nextSibling;r.parentNode.insertBefore(i,r.nextSibling),r=i,i=a!==s.nextSibling&&a}}function jt(e,t,n,o,s){let r=Be.get(t),i=n.map((m,l)=>({id:hasOwnProperty.call(m,"id")?m.id:l,value:m,placeholder:null,available:!0}));if(Be.set(t,i),r){let m=new Set;for(let l of i)m.add(l.id);r=r.filter(l=>m.has(l.id)?!0:(H(l.placeholder),l.placeholder.parentNode.removeChild(l.placeholder),!1))}let a=t,f=n.length-1,u=z(t);for(let m=0;m<i.length;m+=1){let l=i[m],c;if(r){for(let y=0;y<r.length;y+=1)if(r[y].available&&r[y].id===l.id){c=r[y];break}}c?(c.available=!1,l.placeholder=c.placeholder,l.placeholder.previousSibling!==a&&Bo(l.placeholder,a),c.value!==l.value&&o(e,l.placeholder,l.value,c.value,s)):(l.placeholder=globalThis.document.createTextNode(""),a.parentNode.insertBefore(l.placeholder,a.nextSibling),o(e,l.placeholder,l.value,void 0,s)),a=le(z(l.placeholder,{}).endNode||l.placeholder),m===0&&(u.startNode=l.placeholder),m===f&&(u.endNode=a)}if(r)for(let m of r)m.available&&(H(m.placeholder),m.placeholder.parentNode.removeChild(m.placeholder))}function Nt(e,t,n){H(t);let o=z(t);o.startNode=o.endNode=n,t.parentNode.insertBefore(n,t.nextSibling)}function Rn(e){let t=typeof e;if(t==="object"){if(Array.isArray(e))return"array";if(e instanceof globalThis.Node)return"node"}return t}function Y(e,t,n,o,s){let r=Rn(n),i=Rn(o);switch(i!=="undefined"&&r!==i&&(r!=="function"&&H(t),i==="array"?Be.delete(t):i!=="node"&&i!=="function"&&(t.textContent="")),r){case"array":jt(e,t,n,Y,s);break;case"node":Nt(e,t,n);break;case"function":s&&(n.useLayout=!0),n(e,t);break;default:t.textContent=r==="number"||n?n:""}}var Pt=new WeakMap;function Lt(e){return(t,n,o,s)=>{if(s){let r=Pt.get(n);n.removeEventListener(e,r.get(s),s.options!==void 0?s.options:!1)}if(o){if(typeof o!="function")throw Error(`Event listener must be a function: ${typeof o}`);let r=Pt.get(n);r||(r=new WeakMap,Pt.set(n,r));let i=o.bind(null,t);r.set(o,i),n.addEventListener(e,i,o.options!==void 0?o.options:!1)}}}function kt(e,t){if(t)for(let n of String(t).split(/\s+/))n&&e.add(n)}function Go(e){let t=new Set;if(Array.isArray(e))for(let n of e)kt(t,n);else if(e!==null&&typeof e=="object")for(let[n,o]of Object.entries(e))n&&o&&kt(t,n);else kt(t,e);return t}var Mn=new WeakMap;function Ct(e,t,n){let o=Mn.get(t)||new Set,s=Go(n);Mn.set(t,s);for(let r of s)t.classList.add(r),o.delete(r);for(let r of o)t.classList.remove(r)}var Wn=new WeakMap;function At(e,t,n){if(n===null||typeof n!="object")throw TypeError(`Style value must be an object in ${oe(t)}:`,n);let o=Wn.get(t)||new Map,s=new Map;for(let r of Object.keys(n)){let i=I(r),a=n[r];!a&&a!==0?t.style.removeProperty(i):t.style.setProperty(i,a),s.set(i,a),o.delete(i)}for(let r of o.keys())t.style[r]="";Wn.set(t,s)}function zn(e,t,n){if(n===!1||n===void 0||n===null)e.removeAttribute(t);else{let o=n===!0?"":String(n);e.setAttribute(t,o)}}function Rt(e,t,n){if(t.substr(0,2)==="on"){let o=t.substr(2);return Lt(o)}switch(e){case"class":return Ct;case"style":return At;default:{if(n)return(s,r,i)=>{zn(r,e,i)};let o;return(s,r,i)=>{o===void 0&&(o=r.tagName!=="svg",o&&(o=t in r,o||(t=e.replace(/-./g,a=>a[1].toUpperCase()),o=t in r))),o?r[t]=i:zn(r,e,i)}}}}var Kn=L("(\\d+)"),Se=new RegExp(`^${Kn}$`),ce=new RegExp(Kn,"g"),Ho=/^[^A-Za-z]+$/,Xo=new RegExp(L("")+"\\d+");function Jo(e){let t=e[0],n=!1;for(let o=1;o<e.length;o+=1)n=n||t.match(/<\s*(table|th|tr|td|thead|tbody|tfoot|caption|colgroup)([^<>]|"[^"]*"|'[^']*')*>\s*$/),t+=(n?`<!--${L(o-1)}-->`:L(o-1))+e[o],n=n&&!t.match(/<\/\s*(table|th|tr|td|thead|tbody|tfoot|caption|colgroup)\s*>/);return t}function qo(e){return e.replace(/\s*=\s*['"]*$/g,"").split(/\s+/).pop()}function Dn(e){return globalThis.document.createTreeWalker(e,globalThis.NodeFilter.SHOW_ELEMENT|globalThis.NodeFilter.SHOW_TEXT|globalThis.NodeFilter.SHOW_COMMENT,null,!1)}function Fo(e,t=0){e=e.replace(/(^[\n\s\t ]+)|([\n\s\t ]+$)+/g,"");let n=e.indexOf(`
`);if(n>-1){let o=0-t-2;for(n+=1;e[n]===" "&&n<e.length;n+=1)o+=1;return e.replace(/\n +/g,s=>s.substr(0,Math.max(s.length-o,1)))}return e}function In(e,t){let n=L(t);return`${Fo(e).split(`
`).filter(s=>s).map(s=>{let r=s.indexOf(n);return r>-1?`| ${s}
--${"-".repeat(r)}${"^".repeat(6)}`:`| ${s}`}).join(`
`).replace(ce,"${...}")}`}var _n=new Map,Ge=new WeakMap,Vn=new WeakMap;function Yo(e,t){let n=Ge.get(e);if(!n&&!t||t?.length&&n?.length&&t?.every((i,a)=>n[a]===i))return;let o=null;if(t){o=[];for(let i of t){let a=i;a instanceof globalThis.CSSStyleSheet||(a=_n.get(i),a||(a=new globalThis.CSSStyleSheet,a.replaceSync(i),_n.set(i,a))),o.push(a)}}let s,r=Vn.get(e);if(r){s=[];for(let i of e.adoptedStyleSheets)r.includes(i)||s.push(i)}if(o){s=s||e.adoptedStyleSheets.length?[...e.adoptedStyleSheets]:[];for(let i of o)s.push(i)}e.adoptedStyleSheets=s,Ge.set(e,t),Vn.set(e,o)}var Mt=new WeakMap;function Un(e,t){let n=Mt.get(e);if(t){let o=Ge.get(e);if(o&&t.every((s,r)=>o[r]===s))return;(!n||n.parentNode!==e)&&(n=globalThis.document.createElement("style"),Mt.set(e,n),e=le(e),e.nodeType===globalThis.Node.TEXT_NODE?e.parentNode.insertBefore(n,e.nextSibling):e.appendChild(n)),n.textContent=t.join(`
/*------*/
`),Ge.set(e,t)}else n&&(n.parentNode.removeChild(n),Mt.set(e,null))}function Bn(e,t,n,o){let s="";n?(s=e,e=e.split(Xo)):s=Jo(e);let r=globalThis.document.createElement("template");if(t){r.innerHTML=`<svg>${s}</svg>`;let d=r.content.firstChild;r.content.removeChild(d);for(let p of Array.from(d.childNodes))r.content.appendChild(p)}else r.innerHTML=s;let i,a=r.content.children[0];if(a instanceof globalThis.HTMLTemplateElement){for(let d of Array.from(a.attributes)){let p=d.value.trim();if(p&&d.name.startsWith("layout")){if(p.match(ce))throw Error("Layout attribute cannot contain expressions");i=Ot(a,d.name.substr(6),p,!0)}}if(i!==void 0&&r.content.children.length>1)throw Error("Template, which uses layout system must have only the '<template>' root element");o=i||a.hasAttribute("layout"),r=a}let f=Dn(r.content),u={},m=[],l=0,c=null,y=!1,T=!1;for(;f.nextNode();){let d=f.currentNode;if(c&&!c.contains(d)&&(c=null),d.nodeType===globalThis.Node.COMMENT_NODE&&Se.test(d.textContent)&&(d.parentNode.insertBefore(globalThis.document.createTextNode(d.textContent),d.nextSibling),f.nextNode(),d.parentNode.removeChild(d),d=f.currentNode),d.nodeType===globalThis.Node.TEXT_NODE){let p=d.textContent,b=p.match(Se);if(b)d.textContent="",u[b[1]]=[l,Y];else{if(Gn()&&!n&&!c&&!p.match(/^\s*$/)){let g,v=p.trim(),E=v.replace(/\s+/g," ").replace(ce,($,j)=>(j=Number(j),g===void 0&&(g=j),`\${${j-g}}`));if(!E.match(Ho)){let $=d.previousSibling&&d.previousSibling.nodeType===globalThis.Node.COMMENT_NODE?d.previousSibling:"";$&&($.parentNode.removeChild($),l-=1,$=($.textContent.split("|")[1]||"").trim().replace(/\s+/g," "));let j=Wt(E,$).replace(/\${(\d+)}/g,(X,J)=>L(Number(J)+g));p=p.replace(v,j),d.textContent=p}}let w=p.match(ce);if(w){let g=d;w.reduce((v,E)=>{let[$,j]=v.pop().split(E);return $&&v.push($),v.push(E),j&&v.push(j),v},[p]).forEach((v,E)=>{E===0?g.textContent=v:(g=g.parentNode.insertBefore(globalThis.document.createTextNode(v),g.nextSibling),f.currentNode=g,l+=1);let $=g.textContent.match(Se);$&&(g.textContent="",u[$[1]]=[l,Y])})}}}else if(d.nodeType===globalThis.Node.ELEMENT_NODE){(d.tagName==="STYLE"||d.tagName==="SLOT"||d.tagName==="LINK"&&d.rel==="stylesheet")&&(y=!0,T=T||d.tagName==="SLOT"),!c&&(d.getAttribute("translate")==="no"||d.tagName.toLowerCase()==="script"||d.tagName.toLowerCase()==="style")&&(c=d);let p=d.tagName.toLowerCase();p.match(/.+-.+/)&&!globalThis.customElements.get(p)&&!m.includes(p)&&m.push(p);for(let b of Array.from(d.attributes)){let w=b.value.trim(),g=b.name;if(o&&g.startsWith("layout")&&w){if(w.match(ce))throw Error("Layout attribute cannot contain expressions");let E=Ot(d,g.substr(6),w);d.removeAttribute(g),d.classList.add(E);continue}let v=w.match(Se);if(v){let E=qo(e[v[1]]);u[v[1]]=[l,Rt(g,E,t)],d.removeAttribute(b.name)}else{let E=w.match(ce);if(E){let $=`attr__${g}`;for(let[j,X]of E.entries()){let[,J]=X.match(Se),K=!1;u[J]=[l,(q,D,to)=>{let de=z(D);de[$]=(de[$]||w).replace(X,to??""),(E.length===1||j+1===E.length)&&(K=K||!t&&!(D instanceof globalThis.SVGElement)&&g in D,K?D[g]=de[$]:D.setAttribute(g,de[$]),de[$]=void 0)},!0]}b.value=""}}}}l+=1}m.length&&console.warn(`Not defined ${m.map(d=>`<${d}>`).join(", ")} element${m.length>1?"s":""} found in the template:
${In(s,-1)}`);let h=Object.keys(u);return function(p,b,w,g){if(b){if(T&&!p.shadowRoot)throw TypeError("The <slot> element found - use 'shadow' options to explicitly define Shadow DOM mode")}else b=p.shadowRoot||(y||g)&&p.attachShadow({mode:"open"})||p;let v=z(b);if(r!==v.template){let E=globalThis.document.importNode(r.content,!0),$=Dn(E),j=[],X=0,J=0,K=u[h[J]];for(;$.nextNode();){let q=$.currentNode;for(;K&&K[0]===X;)j.push({index:h[J],node:q,fn:K[1],forceUpdate:K[2]}),J+=1,K=u[h[J]];X+=1}if(v.hostLayout&&p.classList.remove(v.hostLayout),H(b),v=z(b),v.template=r,v.markers=j,b.nodeType===globalThis.Node.TEXT_NODE){Un(b),v.startNode=E.childNodes[0],v.endNode=E.childNodes[E.childNodes.length-1];let q=b,D=E.childNodes[0];for(;D;)b.parentNode.insertBefore(D,q.nextSibling),q=D,D=E.childNodes[0]}else{if(o&&i){let q=`${i}-${p===b?"c":"s"}`;p.classList.add(q),v.hostLayout=q}b.appendChild(E)}o&&An(b)}b.adoptedStyleSheets?Yo(b,g):Un(b,g);for(let E of v.markers){let $=w[E.index],j;if(!(v.prevArgs&&(j=v.prevArgs[E.index],j===$&&!E.forceUpdate)))try{E.fn(p,E.node,$,j,o)}catch(X){throw console.error(`Error while updating template expression in ${oe(p)}:
${In(s,E.index)}`),X}}return v.prevArgs=w,b}}var _t={};Ht(_t,{resolve:()=>Dt,set:()=>It,transition:()=>Ee});var zt=new WeakMap;function Dt(e,t,n=200){return function o(s,r){let i=o.useLayout,a;t&&(a=setTimeout(()=>{a=void 0,Y(s,r,t,void 0,i)},n)),zt.set(r,e),e.then(f=>{a&&clearTimeout(a),zt.get(r)===e&&(Y(s,r,f,t&&!a?t:void 0,i),zt.set(r,null))})}}function Hn({target:e,detail:t},n){let o;switch(e.type){case"radio":case"checkbox":o=e.checked&&e.value;break;case"file":o=e.files;break;default:o=t&&hasOwnProperty.call(t,"value")?t.value:e.value}n(o)}function Zo(e,t){return e.split(".").reverse().reduce((n,o)=>n?{[o]:n}:{[o]:t},null)}var Xn=new Map;function It(e,t){if(!e)throw Error(`The first argument must be a property name or an object instance: ${e}`);if(typeof e=="object"){if(t===void 0)throw Error("For model instance property the second argument must be defined");let o=re.get(e);if(!o)throw Error("Provided object must be a model instance of the store");return t===null?()=>{o.set(e,null)}:(s,r)=>{Hn(r,i=>{o.set(e,Zo(t,i))})}}if(arguments.length===2)return o=>{o[e]=t};let n=Xn.get(e);return n||(n=(o,s)=>{Hn(s,r=>{o[e]=r})},Xn.set(e,n)),n}var Vt={};Ht(Vt,{css:()=>tr,key:()=>Qo,style:()=>er,use:()=>nr});function Qo(e){return this.id=e,this}function er(...e){return this.styleSheets=this.styleSheets||[],this.styleSheets.push(...e),this}function tr(e,...t){this.styleSheets=this.styleSheets||[];let n=e[0];for(let o=1;o<e.length;o++)n+=(t[o-1]!==void 0?t[o-1]:"")+e[o];return this.styleSheets.push(n),this}function nr(e){return this.plugins=this.plugins||[],this.plugins.push(e),this}var qn=L(),or=L("svg"),rr=L("layout"),Jn=new Map;function Oe(e,t,n,o,s){function r(i,a){r.useLayout&&(n+=rr);let f=Jn.get(n);return f||(f=Bn(e,o,s,r.useLayout),Jn.set(n,f)),r.plugins?r.plugins.reduce((u,m)=>m(u),()=>f(i,a,t,r.styleSheets))(i,a):f(i,a,t,r.styleSheets)}return Object.assign(r,Vt)}function Fn(e,...t){let n=e.join(qn);return Oe(e,t,n,!1,!1)}function sr(e,...t){let n=e.join(qn)+or;return Oe(e,t,n,!0,!1)}Object.freeze(Object.assign(Fn,_t));var fe=new Map,Yn=new Map,ue=null,Ut=(()=>{let e;try{e=globalThis.navigator.languages||[globalThis.navigator.language]}catch{e=[]}return e.reduce((t,n)=>{let o=n.split("-")[0];return t.add(n),n!==o&&t.add(o),t},new Set)})();function Gn(){return ue!==null||fe.size}var Zn=new Map;function Wt(e,t,n=[]){e=e.trim().replace(/\s+/g," "),t=t.trim();let o=`${e} | ${t}`,s=Yn.get(o);if(!s){if(fe.size)for(let r of Ut){let i=fe.get(r);if(i&&(s=i[o]||i[e],s)){if(s=s.message,typeof s=="object"){let a=Zn.get(r);a||(a=new Intl.PluralRules(r),Zn.set(r,a));let f=s;s=u=>u===0&&f.zero||f[a.select(u)]||f.other||""}break}}s||(ue&&(s=ue(e,t)),s||(s=e,(fe.size||ue)&&console.warn(`Missing translation: "${e}"${t?` [${t}]`:""}`))),Yn.set(o,s)}return typeof s=="function"?s(n[0]):s}function ir(e){return e.replace("$","@").replace(/[^a-zA-Z0-9_@]/g,"_").toLowerCase()}function Qn(e,t){switch(typeof e){case"function":{if((t||{}).format==="chrome.i18n"){let o=new Map;ue=(s,r)=>{s=r?`${s} | ${r}`:s;let i=o.get(s);return i||(i=ir(s),o.set(s,i)),e(i,r)}}else ue=e;break}case"string":{if(!t||typeof t!="object")throw TypeError("Messages must be an object");e==="default"&&Ut.add("default");let n=fe.get(e)||{};fe.set(e,{...n,...t});break}default:throw TypeError("The first argument must be a string or a function")}}Object.defineProperty(Qn,"languages",{get:()=>Array.from(Ut)});function Kt(e,t){let n="";for(let[r,i]of e.entries())n+=r?`\${${r-1}}${i}`:i;let[o,,s=""]=n.split("|");return Wt(o,s,t)}var Bt=/\$\{(\d+)\}/g;function Gt(e,...t){return Kt(e,t).replace(Bt,(n,o)=>t[o])}var eo=L("msg"),lr=L("svg");Gt.html=function(t,...n){let o=Kt(t,n);return Oe(o.replace(Bt,(s,r)=>L(r)),n,o+eo,!1,!0)};Gt.svg=function(t,...n){let o=Kt(t,n);return Oe(o.replace(Bt,(s,r)=>L(r)),n,o+eo+lr,!0,!0)};export{ln as children,Xe as debug,et as define,He as dispatch,Fn as html,Qn as localize,rn as mount,Gt as msg,sn as parent,Do as router,$o as store,sr as svg};
//# sourceMappingURL=hybrids.mjs.map